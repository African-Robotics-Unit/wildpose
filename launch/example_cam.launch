<launch>
    <node pkg="ximea_ros_cam" type="ximea_ros_cam_node" name="ximea_cam" output="screen">
        <param name="serial_no"       type="string" value="29970951" />
        <param name="cam_name"        type="string" value="ximea_cam" />
        <param name="calib_file"      type="string" value=""         />
        <param name="frame_id"        type="string" value="0"        />
        <param name="num_cams_in_bus" type="int"    value="2"        />
        <param name="bw_safetyratio"  type="double" value="1.0"      />
        <param name="publish_xi_image_info" type="bool" value="true"/>
        <param name="poll_time"       type="double" value="2.0"/>
        <param name="poll_time_frame" type="double" value="0.001"/>
        <rosparam command="load" file="$(find ximea_ros_cam)/config/example_cam_config.yaml" />
    </node>

    <node pkg="image_view" type="video_recorder" name="video_recorder" output="screen">
        <remap from="image" to="/ximea_cam/image_raw" />
        <param name="fps" type="int" value="60" />
        <param name="filename" type="string" value="/mnt/wildpose_data/output.avi" />
    </node>

    <node pkg="image_view" type="image_view" name="image_view" output="screen">
        <remap from="image" to="/ximea_cam/image_raw" />
    </node>

	<arg name="lvx_file_path" default="/mnt/wildpose_data/livox_test.lvx"/>
        <arg name="bd_list" default="100000000000000"/>
        <arg name="xfer_format" default="0"/>
        <arg name="multi_topic" default="0"/>
        <arg name="data_src" default="0"/>
        <arg name="publish_freq" default="10.0"/>	
	<arg name="output_type" default="0"/>
        <arg name="rviz_enable" default="false"/>
        <arg name="rosbag_enable" default="true"/>
        <arg name="msg_frame_id" default="livox_frame"/>
        <arg name="lidar_bag" default="true"/>
        <arg name="imu_bag" default="true"/>

        <param name="xfer_format" value="$(arg xfer_format)"/>
        <param name="multi_topic" value="$(arg multi_topic)"/>
        <param name="data_src" value="$(arg data_src)"/>
        <param name="publish_freq" type="double" value="$(arg publish_freq)"/>
        <param name="output_data_type" value="$(arg output_type)"/>
        <param name="user_config_path" type="string" value="$(find livox_ros_driver)/config/livox_lidar_config.json"/>
        <param name="frame_id" type="string" value="$(arg msg_frame_id)"/>
        <param name="enable_lidar_bag" type="bool" value="$(arg lidar_bag)"/>
        <param name="enable_imu_bag" type="bool" value="$(arg imu_bag)"/>

        <node name="livox_lidar_publisher" pkg="livox_ros_driver"
              type="livox_ros_driver_node" required="true"
              output="screen" />

        <node pkg="rosbag" type="record" name="record" output="screen"
                        args="-o /mnt/wildpose_data/ /livox/lidar /livox/imu /ximea_cam/xi_image_info"/>
</launch>
